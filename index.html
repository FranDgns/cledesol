<!DOCTYPE html>
<html>
  <head>
    <title>Cle de Sol</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="stylesheets/leaflet.css" />
    <link rel="stylesheet" href="stylesheets/leaflet.easy-button.css" />
    <link rel="stylesheet" href="stylesheets/application.css" />
    <link rel="stylesheet" href="stylesheets/bootstrap.min.css">
    <link rel="stylesheet" href="stylesheets/bootstrap-theme.min.css">
    <script src="javascripts/jquery-3.1.1.min.js"></script>
    <script src="javascripts/leaflet.js"></script>
    <script src="javascripts/leaflet.easy-button.js"></script>
    <script src="javascripts/bootstrap.min.js"></script>  
    <script src="javascripts/Chart.min.js"></script>  
    <script src="javascripts/application.js"></script>
    <style>
      input[type=text], select {
        padding: 2px 20px;
        width: 100%;
        margin: 8px 0;
        display: inline-block;
        box-sizing: border-box;
        border: 2px solid #4268a5;
        border-radius: 4px;
      }
    </style>
    <script src="javascripts/form2json.js"></script>
  </head>
  <body>
    <nav class="navbar navbar-default">
      <div class="navbar-header">
	<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
	</button>
	<a class="navbar-brand" href="#">
          <img alt="Clé de sol" src="image/cledesol.svg" style="max-height: 30px; margin-top: -5px">
	</a>
      </div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	<ul class="nav navbar-nav">
          <li class="active"><a href="#">Observations</a></li>
          <li><a href="#"><strong>Trouver un expert&nbsp;!</strong></a></li>
          <li><a href="#"><strong>Je suis un expert</strong></a></li>
	</ul>
	<ul class="nav navbar-nav navbar-right">
          <li><a href="#">Wiki</a></li>
          <li><a href="#">Forum</a></li>
          <li><a href="#"><strong>Martin DUPONT</strong></a></li>
	</ul>
      </div>
    </nav>

    <div id="soil-validation" class="modal fade" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
	<div class="modal-content">
	  <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Identifiez votre type de sol</h4>
	  </div>
	  <div class="modal-body">
	    <canvas id="soil-observations" width="200" height="200"></canvas>
	  </div>
	  <div class="modal-footer">
	    <div class="pull-left"><a href="https://wiki.aurea.eu/index.php/Introduction_-_L%E2%80%99approche_globale_de_l%E2%80%99analyse_de_terre" target="_blank" class="btn btn-default">Plus d'information sur les types de sol</a></div>
            <button type="button" class="btn btn-danger" id="soil-validation-fix">
	      <span class="glyphicon glyphicon-remove"></span> Je ne trouve pas mon type de sol
	    </button>
	  </div>
	</div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->


    <div id="soil-fix" class="modal fade" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
	<div class="modal-content">
	  <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Correction d'observation</h4>
	  </div>
	  <div class="modal-body">
            <form id="newInput" method="POST" >
				<label for="user">Identifiant utilisateur: </label>
				<input id="user" name="id_utilisateur" type="text" required />
				</br>
				<input type="hidden" name="x" />
				<input type="hidden" name="y" />
				<input type="hidden" name="idsol" value="ABC123" />
				<label for="nom_officiel">Nom officiel (type de sol): </label>
				<input id="nom_officiel" name="nom_officiel" type="text" />
				</br>
				<label for="nom_referentiel">Nom r&eacute;f&eacute;rentiel (type de sol): </label>
				<input id="nom_referentiel" name="nom_referentiel" type="text" />
				</br>
				<label for="calcaire">Calcaire: </label>
				<select id="calcaire" name="calcaire" required >
					<option disabled selected value>-- Choisissez une valeur --</option>
					<option value="calcaire">Calcaire</option>
					<option value="non-calcaire">Non calcaire</option>
				</select>
				<br/>
				<label for="pierre">Pierrosit&eacute;: </label>
				<select id="pierre" name="pierrosite" required >
					<option disabled selected value>-- Choisissez une valeur --</option>
					<option value="caillou">Caillouteux</option>
					<option value="peu-caillou">Peu caillouteux</option>
					<option value="non-caillou">Non caillouteux</option>
				</select>
				<br/>
				<label for="texture">Texture: </label>
				<select id="texture" name="texture" required >
					<option disabled selected value>-- Choisissez une valeur --</option>
					<option value="sable">Sable</option>
					<option value="argile">Argile</option>
					<option value="limon-argile">Limon argileux</option>
					<option value="sable-limon">Sable limoneux</option>
					<option value="limon">Limon</option>
					<option value="limon-sable">Limon sableux</option>
				</select>
				<br/>
				<label for="hydro">Hydromorphie: </label>
				<select id="hydro" name="hydromorphie" required >
					<option disabled selected value>-- Choisissez une valeur --</option>
					<option value="non-hydromorphe">Non hydromorphe</option>
					<option value="hydromorphe">Hydromorphe</option>
				</select>
				<br/>
				<input type="button" class="btn btn-primary" value="Enregistrer" onclick="callExtJs()" />
				<button type="button" class="btn btn-default" data-dismiss="modal">Annuler</button>
			</form>
		<script>
			function callExtJs() {
				var array = $("#newInput").serializeArray();
                var json = {};
				
                jQuery.each(array, function() {
                    json[this.name] = this.value || '';
                });
				console.log(json);
                Cledesol.pushFormData(json);
				$("#soil-fix").modal("hide");
			}
		</script>
	  </div>
	  <!--<div class="modal-footer">
            <button type="button" class="btn btn-primary">Enregistrer</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">Annuler</button>
	  </div>-->
	</div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <div id="main">
      <div id="place-actions">
        <button type="button" class="btn btn-danger btn-block" id="evaluate-button">Évaluer</button>
      </div>
      <div id="place"></div>
    </div>
  </body>
</html>
